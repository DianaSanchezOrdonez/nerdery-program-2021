<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Loop</title>
</head>
<body>
    <div class="go">Click Me</div>
    <style>
        * {
            font-family: 'Roboto', sans-serif;
            background: teal;
        }

        .go {
            margin: 5rem;
            background: white;
            padding: 5rem;
            width: 15rem;
            height: 15rem;
            transition: all 0.2s;
        }

        .circle {
            border-radius: 50%;
        }

        .red {
            background: red;
        }

        .purple {
            background: purple;
            color: white;
        }

        .fadeOut {
            opacity: 0;
        }

    </style>
    <script>

        // function wait( ms = 0){
        //     return new Promise(function(resolve, reject){
        //         setTimeout(resolve, ms)
        //     })
        // }

        //THIRD METHOD

        const wait = (ms) => new Promise( resolve => setTimeout(resolve, ms) );

        async function animateAsync(e){
            const el = e.currentTarget;

            // 1. Change the text to GO when clicked
            el.textContent = 'Go!';
            // 2. Make it a circle after 2 seconds
            await wait(2000)
            el.classList.add('circle');
            // 3. Make it a red after 0.5s
            await wait(500);
            el.classList.add('red');
            // 4. Make it square after 0.25s
            await wait(250);
            el.classList.remove('circle');
            // 5. Make it purple after 0.3s
            await wait(300);
            el.classList.remove('red');
            el.classList.add('purple');
            // 6. Fade out after 0.5s
            await wait(500);
            el.classList.add('fadeOut');
        }

        const go = document.querySelector('.go');
        go.addEventListener('click', animateAsync);

        //SECOND METHOD

        //const wait = (ms) => new Promise( resolve => setTimeout(resolve, ms) );

        // wait(200).then(() => {
        //     console.log('Done!');
        // });

        // function animate(e){
        //     const el = e.currentTarget;

        //     // 1. Change the text to GO when clicked
        //     el.textContent = 'Go!';

        //     // 2. Make it a circle after 2 seconds
        //     wait(2000)
        //         .then(() => {
        //             el.classList.add('circle');
        //             // 3. Make it a red after 0.5s
        //             return wait(500);
        //         })
        //         .then(() => {
        //             el.classList.add('red');
        //             // 4. Make it square after 0.25s
        //             return wait(250);
        //         })
        //         .then(() => {
        //             el.classList.remove('circle');
        //             // 5. Make it purple after 0.3s
        //             return wait(300);
        //         })
        //         .then(() => {
        //             el.classList.remove('red');
        //             el.classList.add('purple');
        //             // 6. Fade out after 0.5s
        //             return wait(500);
        //         })
        //         .then(() => {
        //             el.classList.add('fadeOut');
        //         })
        // }

        // const go = document.querySelector('.go');
        // go.addEventListener('click', animate);

        //FIRST METHOD
        // // 1. Change the text to GO when clicked
        // const go = document.querySelector('.go');
        // go.addEventListener('click', function(e){
        //     const el = e.currentTarget;
        //     el.textContent = 'Go!';
        //     // 2. Make it a circle after 2 seconds
        //     setTimeout(function(){
        //         el.classList.add('circle');
                
        //         // 3. Make it a red after 0.5s
        //         setTimeout(function(){
        //             el.classList.add('red');
                    
        //             // 4. Make it square after 0.25s
        //             setTimeout(function(){
        //                 el.classList.remove('circle');

        //                 // 5. Make it purple after 0.3s
        //                 setTimeout(function(){
        //                     el.classList.remove('red');
        //                     el.classList.add('purple');

        //                     // 6. Fade out after 0.5s
        //                     setTimeout(function(){
        //                         el.classList.add('fadeOut');
        //                     }, 500);

        //                 }, 300);

        //             }, 250);

        //         }, 500);

        //     }, 2000);
        // });
        // // 7. Finish
</script>
</body>
</html>